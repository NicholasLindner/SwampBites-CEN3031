{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block content %}
<!DOCTYPE html>
<html>
<head>
    <style>
        table {
            border-collapse: collapse;
            background: white;
            color: black;
            border: 1px solid black;
            width: 100%;
        }
         
        th, td {
            border: 1px solid black;
            text-align: left;
            padding: 8px;
            vertical-align: top;
            height: 100px; /* Adjust height for better cell division */
        }

        .highlight {
            background-color: #FFD700; /* Gold background for today's date */
        }

        .month-year-buttons {
            margin-top: 20px;
            margin-bottom: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
        }

        .calendar-container {
            padding-top: 10px;
        }

        .date-number {
            position: relative;
            top: 0;
            left: 0;
            padding: 5px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="monthYear" class="text-center font-weight-bold month-year-buttons">
            <button onclick="changeMonth(-1)" id="prev">&#10094;</button>
            <span style="font-size: 24px;">Month / Year</span>
            <button onclick="changeMonth(1)" id="next">&#10095;</button>
        </div>
        <div class="calendar-container">
            <table>
                <thead>
                    <tr style="background: orange; color: black;">
                        <th>Sun</th>
                        <th>Mon</th>
                        <th>Tue</th>
                        <th>Wed</th>
                        <th>Thu</th>
                        <th>Fri</th>
                        <th>Sat</th>
                    </tr>
                </thead>
                <tbody id="calendarBody">
                    <!-- Calendar days will be generated by JavaScript -->
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>

{% endblock %}

{% block javascript %}
<script>
    const today = new Date();
    let currentMonth = today.getMonth();
    let currentYear = today.getFullYear();

    const months = ["January", "February", "March", "April", "May", "June",
                    "July", "August", "September", "October", "November", "December"];

    document.addEventListener("DOMContentLoaded", function() {
        renderCalendar(currentMonth, currentYear);
    });

    function changeMonth(direction) {
        currentMonth += direction;
        if (currentMonth < 0 || currentMonth > 11) {
            currentMonth -= direction; // Prevents moving outside the current year
        }
        renderCalendar(currentMonth, currentYear);
    }

    function renderCalendar(month, year) {
        const monthYearHeader = document.getElementById("monthYear");
        monthYearHeader.children[1].innerHTML = `${months[month]} ${year}`;

        const startDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();

        let calendarBody = document.getElementById("calendarBody");
        calendarBody.innerHTML = ""; // Clear the previous cells

        let date = 1;
        for (let i = 0; i < 6; i++) { // Calendar has at max 6 rows
            let row = document.createElement("tr");
            for (let j = 0; j < 7; j++) {
                let cell = document.createElement("td");
                if (i === 0 && j < startDay || date > daysInMonth) {
                    cell.innerHTML = "";
                } else if (date <= daysInMonth) {
                    cell.innerHTML = `<span class="date-number">${date}</span>`;
                    if (date === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
                        cell.classList.add("highlight");
                    }
                    date++;
                }
                row.appendChild(cell);
            }
            calendarBody.appendChild(row); // Append each row to the calendar body
        }
    }
</script>
{% endblock %}
